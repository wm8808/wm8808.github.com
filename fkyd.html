<!-- code by  -->    	
<!doctype html> 
<html> 
<head> 
<meta charset="utf-8"> 
<meta name="description" content="网页描述" />
<meta name="Keywords" content="关键字" />
<title>无标题文档</title>
<style>
	*{ margin:0; padding:0; }
	#div1{ width:700px; height:400px; position:relative; left:0; top:0; background:url(img5/0.jpg) no-repeat; margin:100px auto; }
</style>
<script src="js/move.js"></script>
<script>
	window.onload = function (){
		var oBtn = document.getElementById('btn');
		var oDiv = document.getElementById('div1');
		var R = 4;
		var C = 7;
		for( var i = 0; i<C; i++){
			for( var j = 0; j<R; j++){
				var oS = document.createElement('span');
				oS.style.width = oDiv.offsetWidth/C+'px';
				oS.style.height = oDiv.offsetHeight/R+'px';
				oDiv.appendChild(oS);
				oS.style.position='absolute';
				oS.style.left = i*oS.offsetWidth+'px';
				oS.style.top = j*oS.offsetHeight+'px';
				oS.style.background = 'url(img5/0.jpg) no-repeat -'+i*oS.offsetWidth+'px -'+j*oS.offsetHeight+'px';
				//oS.style.background = 'url(img3/0.jpg) no-repeat -'+i*oS.offsetWidth+'px -'+j*oS.offsetHeight+'px';
			}
		}
		var aS = oDiv.getElementsByTagName('span');
		var iNow = 0;
		var bOk = false;
		oBtn.onclick = function (){
			if(bOk)return;
			bOk = true;
			iNow++;
			for( var i = 0; i<aS.length; i++){
				(function(index){
					setTimeout(function (){
						aS[index].style.backgroundImage = 'url(img5/'+iNow%3+'.jpg)';
						aS[index].style.opacity = 0;
						move(aS[index],{opacity:1},{complete:function(){
							if(index == aS.length - 1){
								oDiv.style.backgroundImage = 'url(img5/'+iNow%3+'.jpg)';
								bOk = false;
							}
						}});
					},3000*Math.random());
				})(i);
			}
		};
	};
</script>
</head>
<body>
	<input type="button" value="换一张" id="btn" />
	<div id="div1"></div>
</body>
</html>